# AlphaZero é£æ ¼è‡ªåšå¼ˆå­¦ä¹ ç³»ç»Ÿ

å®Œæ•´çš„ç­–ç•¥é€‰æ‹©å’Œè‡ªåšå¼ˆè®­ç»ƒç³»ç»Ÿï¼Œå€Ÿé‰´ AlphaZero çš„è‡ªåšå¼ˆå­¦ä¹ æ€æƒ³ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AlphaZero è‡ªåšå¼ˆå­¦ä¹ ç³»ç»Ÿ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ç­–ç•¥å˜ä½“ç”Ÿæˆ (strategy_generator.py)                    â”‚
â”‚     â”œâ”€ é«˜å¹¶è¡Œåº¦ç­–ç•¥ (parallel_high)                         â”‚
â”‚     â”œâ”€ ç»†ç²’åº¦ä»»åŠ¡åˆ†è§£ç­–ç•¥ (granular)                        â”‚
â”‚     â”œâ”€ é¡ºåºæ‰§è¡Œç­–ç•¥ (sequential)                            â”‚
â”‚     â””â”€ æ··åˆç­–ç•¥ (hybrid)                                    â”‚
â”‚                                                             â”‚
â”‚  2. å¹¶è¡Œæ‰§è¡Œå™¨ (parallel_executor.py)                       â”‚
â”‚     â”œâ”€ ä½¿ç”¨ asyncio å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰å˜ä½“                        â”‚
â”‚     â”œâ”€ æ”¶é›†æ‰§è¡Œç»“æœï¼ˆè´¨é‡åˆ†æ•°ã€è€—æ—¶ã€æˆåŠŸç‡ï¼‰                â”‚
â”‚     â””â”€ ä¿å­˜åˆ° execution_results/                           â”‚
â”‚                                                             â”‚
â”‚  3. ç»“æœå¯¹æ¯”åˆ†æ                                            â”‚
â”‚     â”œâ”€ è®¡ç®—è´¨é‡åˆ†æ•°ï¼ˆä»£ç è´¨é‡ã€ä»»åŠ¡å®Œæˆåº¦ã€åä½œæ•ˆæœï¼‰        â”‚
â”‚     â”œâ”€ é€‰æ‹©æœ€ä½³å˜ä½“                                         â”‚
â”‚     â””â”€ åˆ†æä¼˜åŠ¿å’ŒåŠ£åŠ¿                                       â”‚
â”‚                                                             â”‚
â”‚  4. ç­–ç•¥æƒé‡æ›´æ–°                                            â”‚
â”‚     â”œâ”€ ä½¿ç”¨æŒ‡æ•°ç§»åŠ¨å¹³å‡ (EMA, alpha=0.3)                   â”‚
â”‚     â”œâ”€ æ›´æ–° strategy_weights.json                          â”‚
â”‚     â””â”€ è®°å½•æ›´æ–°æ—¶é—´                                         â”‚
â”‚                                                             â”‚
â”‚  5. çŸ¥è¯†æç‚¼                                                â”‚
â”‚     â”œâ”€ æå–æœ€ä½³å®è·µ                                         â”‚
â”‚     â”œâ”€ æ›´æ–° .claude/rules/*.md                             â”‚
â”‚     â””â”€ æ›´æ–° Agent é…ç½®                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒç»„ä»¶

### 1. ç­–ç•¥å˜ä½“ç”Ÿæˆå™¨ (`strategy_generator.py`)

è‡ªåŠ¨ç”Ÿæˆ 4 ç§ç­–ç•¥å˜ä½“ï¼š

| å˜ä½“ | å¹¶è¡Œåº¦ | é€‚ç”¨åœºæ™¯ | Agent æ•°é‡ |
|------|--------|---------|-----------|
| **parallel_high** | é«˜ | ç‹¬ç«‹ä»»åŠ¡å¤š | 5 |
| **granular** | ä¸­ | éœ€è¦ç²¾ç»†æ§åˆ¶ | 3 |
| **sequential** | ä½ | å¼ºä¾èµ–ä»»åŠ¡ | 1 |
| **hybrid** | è‡ªé€‚åº” | å¤æ‚ä»»åŠ¡ | 3 |

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# ç”Ÿæˆç­–ç•¥å˜ä½“
python3 .claude/hooks/scripts/strategy_generator.py

# åˆ†æä»»åŠ¡å¹¶æ¨èç­–ç•¥
python3 .claude/hooks/scripts/strategy_generator.py "å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸ¯ ä»»åŠ¡åˆ†æ:
  ä»»åŠ¡æè¿°: å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
  å¤æ‚åº¦: 6/10
  æ¨èç­–ç•¥: granular
```

### 2. å¹¶è¡Œæ‰§è¡Œå™¨ (`parallel_executor.py`)

ä½¿ç”¨ asyncio å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰ç­–ç•¥å˜ä½“ï¼Œå¯¹æ¯”ç»“æœã€‚

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# è¿è¡Œè‡ªåšå¼ˆè®­ç»ƒ
python3 .claude/hooks/scripts/parallel_executor.py
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸš€ å¼€å§‹å¹¶è¡Œæ‰§è¡Œ 4 ä¸ªç­–ç•¥å˜ä½“...
ğŸ“ ä»»åŠ¡æè¿°: å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½

ğŸ”„ å˜ä½“ 1 (parallel_high) å¼€å§‹æ‰§è¡Œ...
ğŸ”„ å˜ä½“ 2 (granular) å¼€å§‹æ‰§è¡Œ...
ğŸ”„ å˜ä½“ 3 (sequential) å¼€å§‹æ‰§è¡Œ...
ğŸ”„ å˜ä½“ 4 (hybrid) å¼€å§‹æ‰§è¡Œ...

âœ… å˜ä½“ 1 (parallel_high) æ‰§è¡Œå®Œæˆ - å¾—åˆ†: 9.7/10
âœ… å˜ä½“ 2 (granular) æ‰§è¡Œå®Œæˆ - å¾—åˆ†: 8.8/10
âœ… å˜ä½“ 3 (sequential) æ‰§è¡Œå®Œæˆ - å¾—åˆ†: 8.4/10
âœ… å˜ä½“ 4 (hybrid) æ‰§è¡Œå®Œæˆ - å¾—åˆ†: 8.8/10

âœ… æ‰€æœ‰å˜ä½“æ‰§è¡Œå®Œæˆï¼Œæ€»è€—æ—¶: 2.00ç§’

ğŸ“Š å¯¹æ¯”åˆ†æç»“æœ:

| å˜ä½“ID | å˜ä½“åç§° | å¾—åˆ† | è€—æ—¶(ç§’) | çŠ¶æ€ |
|--------|----------|------|----------|------|
| 1 | parallel_high | 9.7/10 | 1.00 | âœ… |
| 2 | granular | 8.8/10 | 1.50 | âœ… |
| 3 | sequential | 8.4/10 | 2.00 | âœ… |
| 4 | hybrid | 8.8/10 | 1.20 | âœ… |

ğŸ† æœ€ä½³å˜ä½“: parallel_high (å¾—åˆ†: 9.7/10)

ğŸ“ˆ ç­–ç•¥æƒé‡å·²æ›´æ–°:
  parallel_high: 5.00 â†’ 6.41
```

## è´¨é‡è¯„åˆ†æ ‡å‡†

æ‰§è¡Œç»“æœçš„è´¨é‡åˆ†æ•°è®¡ç®—æ–¹å¼ï¼š

```python
# æƒé‡é…ç½®
weights = {
    "code_quality": 0.3,        # ä»£ç è´¨é‡
    "task_completion": 0.3,     # ä»»åŠ¡å®Œæˆåº¦
    "agent_coordination": 0.2,  # Agent åä½œæ•ˆæœ
    "test_pass_rate": 0.2       # æµ‹è¯•é€šè¿‡ç‡
}

# åŠ æƒè®¡ç®—
score = (
    code_quality * 0.3 +
    task_completion * 0.3 +
    agent_coordination * 0.2 +
    test_pass_rate * 0.2
)

# æ ¹æ®å¹¶è¡Œåº¦è°ƒæ•´
if parallel_degree == "high":
    score *= 1.1  # é«˜å¹¶è¡Œåº¦åŠ åˆ†
elif parallel_degree == "low":
    score *= 0.95  # ä½å¹¶è¡Œåº¦å‡åˆ†
```

## ç­–ç•¥æƒé‡ç®¡ç†

ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤ç­–ç•¥æƒé‡æ–‡ä»¶ `.claude/strategy_weights.json`ï¼š

```json
{
  "parallel_high": 8.2,
  "granular": 7.8,
  "sequential": 6.5,
  "hybrid": 8.5,
  "last_updated": "2026-01-24T10:30:00"
}
```

**æƒé‡æ›´æ–°è§„åˆ™**ï¼š
- ä½¿ç”¨æŒ‡æ•°ç§»åŠ¨å¹³å‡ (EMA)
- alpha = 0.3
- æ–°æƒé‡ = 0.3 Ã— æœ¬æ¬¡å¾—åˆ† + 0.7 Ã— å†å²æƒé‡

## æ‰§è¡Œç»“æœå­˜å‚¨

æ¯æ¬¡æ‰§è¡Œçš„è¯¦ç»†ç»“æœä¿å­˜åœ¨ `.claude/hooks/execution_results/`ï¼š

```json
{
  "timestamp": "20260124_103000",
  "task_description": "å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½",
  "results": [
    {
      "variant_id": 1,
      "variant_name": "parallel_high",
      "success": true,
      "duration": 1.2,
      "quality_score": 8.5,
      "result": {
        "files_modified": 5,
        "tests_passed": 8,
        "tests_failed": 0,
        "code_quality": 8.5,
        "agent_coordination": 7.8,
        "task_completion": 9.0
      }
    }
  ]
}
```

## ä¸ Agent ç³»ç»Ÿé›†æˆ

### 1. strategy-selector Agent

åœ¨ orchestrator ä¸­è°ƒç”¨ strategy-selectorï¼š

```python
# è°ƒç”¨ strategy-selector åˆ†æä»»åŠ¡
strategy_result = Task(
    agent="strategy-selector",
    prompt=f"åˆ†æä»»åŠ¡å¹¶é€‰æ‹©æœ€ä¼˜ç­–ç•¥: {task_description}"
)

# æ ¹æ®æ¨èç­–ç•¥æ‰§è¡Œ
if strategy_result["strategy_key"] == "parallel_high":
    # é«˜å¹¶è¡Œåº¦æ‰§è¡Œ
    ...
elif strategy_result["strategy_key"] == "hybrid":
    # æ··åˆç­–ç•¥æ‰§è¡Œ
    ...
```

### 2. self-play-trainer Agent

åœ¨éœ€è¦å¯¹æ¯”å¤šç§ç­–ç•¥æ—¶è°ƒç”¨ï¼š

```python
# è°ƒç”¨ self-play-trainer è¿›è¡Œè‡ªåšå¼ˆè®­ç»ƒ
result = Task(
    agent="self-play-trainer",
    prompt="å¯¹æ¯”å¤šç§ç­–ç•¥ï¼Œé€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆ: å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"
)

# è·å–æ¨èç­–ç•¥
best_strategy = result["best_variant"]
best_score = result["best_score"]

# ä½¿ç”¨æ¨èç­–ç•¥æ‰§è¡Œä»»åŠ¡
...
```

## å¤æ‚åº¦ä¸ç­–ç•¥æ˜ å°„

| å¤æ‚åº¦ | æ¨èç­–ç•¥ | ç†ç”± |
|--------|---------|------|
| 1-3 (ç®€å•) | sequential | ç®€å•ä»»åŠ¡ï¼Œé¡ºåºæ‰§è¡Œå³å¯ |
| 4-6 (ä¸­ç­‰) | granular | ä¸­ç­‰ä»»åŠ¡ï¼Œç»†ç²’åº¦åˆ†è§£ |
| 7-8 (å¤æ‚) | hybrid | å¤æ‚ä»»åŠ¡ï¼Œæ··åˆç­–ç•¥ |
| 9-10 (è¶…å¤æ‚) | parallel_high | è¶…å¤æ‚ä»»åŠ¡ï¼Œé«˜å¹¶è¡Œåº¦ |

## ä»»åŠ¡å¤æ‚åº¦åˆ†æ

ç³»ç»Ÿä¼šæ ¹æ®å…³é”®è¯è‡ªåŠ¨è¯„ä¼°ä»»åŠ¡å¤æ‚åº¦ï¼š

**é«˜å¤æ‚åº¦å…³é”®è¯** (+1 åˆ†)ï¼š
- æ¶æ„ã€é‡æ„ã€è¿ç§»ã€é›†æˆã€åˆ†å¸ƒå¼
- æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨ã€å¤šæ¨¡å—ã€å¤æ‚ä¸šåŠ¡

**ä¸­ç­‰å¤æ‚åº¦å…³é”®è¯** (+0.5 åˆ†)ï¼š
- åŠŸèƒ½ã€APIã€æ•°æ®åº“ã€è®¤è¯ã€æƒé™

**ä½å¤æ‚åº¦å…³é”®è¯** (-1 åˆ†)ï¼š
- ä¿®å¤ã€æ ·å¼ã€æ–‡æ¡ˆã€é…ç½®ã€ç®€å•

## æœ€ä½³å®è·µ

1. **ç®€å•ä»»åŠ¡**ï¼šç›´æ¥ä½¿ç”¨ strategy-selector é€‰æ‹©ç­–ç•¥
2. **å¤æ‚ä»»åŠ¡**ï¼šä½¿ç”¨ self-play-trainer å¯¹æ¯”å¤šç§ç­–ç•¥
3. **å®šæœŸæŸ¥çœ‹**ï¼šæ£€æŸ¥ execution_results/ äº†è§£å†å²è¡¨ç°
4. **æƒé‡è°ƒæ•´**ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨æ›´æ–°æƒé‡ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
5. **çŸ¥è¯†æç‚¼**ï¼šæœ€ä½³å®è·µä¼šè‡ªåŠ¨å†™å…¥ .claude/rules/

## æ–‡ä»¶ç»“æ„

```
.claude/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â”œâ”€â”€ strategy_generator.py      # ç­–ç•¥å˜ä½“ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ parallel_executor.py       # å¹¶è¡Œæ‰§è¡Œå™¨
â”‚   â”‚   â””â”€â”€ README_ALPHAZERO.md        # æœ¬æ–‡æ¡£
â”‚   â”œâ”€â”€ execution_results/             # æ‰§è¡Œç»“æœå­˜å‚¨
â”‚   â”‚   â””â”€â”€ execution_*.json
â”‚   â””â”€â”€ strategy_variants.json         # ç”Ÿæˆçš„ç­–ç•¥å˜ä½“
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ strategy-selector.md           # ç­–ç•¥é€‰æ‹©å™¨ Agent
â”‚   â””â”€â”€ self-play-trainer.md           # è‡ªåšå¼ˆè®­ç»ƒå™¨ Agent
â”œâ”€â”€ rules/
â”‚   â”œâ”€â”€ backend.md                     # åç«¯ç­–ç•¥è§„åˆ™
â”‚   â”œâ”€â”€ frontend.md                    # å‰ç«¯ç­–ç•¥è§„åˆ™
â”‚   â””â”€â”€ collaboration.md               # åä½œç­–ç•¥è§„åˆ™
â””â”€â”€ strategy_weights.json              # ç­–ç•¥æƒé‡é…ç½®
```

## è¿›åŒ–è®°å½•

ç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•æ¯æ¬¡è‡ªåšå¼ˆè®­ç»ƒçš„ç»“æœï¼š

| æ—¶é—´ | ä»»åŠ¡ | æœ€ä½³å˜ä½“ | å¾—åˆ† | æ”¹è¿› |
|------|------|---------|------|------|
| 2026-01-24 10:30 | ç”¨æˆ·ç™»å½• | hybrid | 8.5/10 | +0.3 |
| 2026-01-24 11:00 | æ•°æ®å¯¼å‡º | parallel_high | 8.2/10 | +0.5 |
| 2026-01-24 11:30 | æƒé™ç®¡ç† | granular | 7.8/10 | +0.2 |

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é€‰æ‹©åˆé€‚çš„ç­–ç•¥ï¼Ÿ

A: ä½¿ç”¨ `strategy_generator.py` åˆ†æä»»åŠ¡æè¿°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ¨èæœ€ä¼˜ç­–ç•¥ã€‚

### Q: å¦‚ä½•æŸ¥çœ‹å†å²æ‰§è¡Œç»“æœï¼Ÿ

A: æŸ¥çœ‹ `.claude/hooks/execution_results/` ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶ã€‚

### Q: å¦‚ä½•æ‰‹åŠ¨è°ƒæ•´ç­–ç•¥æƒé‡ï¼Ÿ

A: ç¼–è¾‘ `.claude/strategy_weights.json` æ–‡ä»¶ï¼Œä½†å»ºè®®è®©ç³»ç»Ÿè‡ªåŠ¨æ›´æ–°ã€‚

### Q: å¦‚ä½•é›†æˆåˆ°ç°æœ‰å·¥ä½œæµï¼Ÿ

A: åœ¨ orchestrator ä¸­è°ƒç”¨ strategy-selector æˆ– self-play-trainer Agentã€‚

## æœªæ¥ä¼˜åŒ–

1. **çœŸå®æ‰§è¡Œ**ï¼šé›†æˆ Claude Code çš„ background_task API
2. **æ›´å¤šå˜ä½“**ï¼šæ”¯æŒè‡ªå®šä¹‰ç­–ç•¥å˜ä½“
3. **å¯è§†åŒ–**ï¼šæ·»åŠ æ‰§è¡Œç»“æœå¯è§†åŒ–ç•Œé¢
4. **è‡ªåŠ¨è°ƒä¼˜**ï¼šæ ¹æ®å†å²æ•°æ®è‡ªåŠ¨è°ƒæ•´ç­–ç•¥å‚æ•°
5. **A/B æµ‹è¯•**ï¼šæ”¯æŒå¤šç­–ç•¥ A/B æµ‹è¯•

## å‚è€ƒèµ„æ–™

- AlphaZero è®ºæ–‡: https://arxiv.org/abs/1712.01815
- Claude Code æ–‡æ¡£: @.claude/docs/claude-code-reference.md
- é¡¹ç›®æ ‡å‡†: @.claude/project_standards.md
