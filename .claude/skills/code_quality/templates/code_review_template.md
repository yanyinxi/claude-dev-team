# 代码审查报告：[功能名称]

**审查日期**: YYYY-MM-DD
**审查人员**: [审查人员名称]
**审查范围**: [文件列表或功能模块]

## 审查概览

| 指标 | 数值 |
|------|------|
| 审查文件数 | XX |
| 发现问题数 | XX |
| 严重问题 | XX |
| 重要问题 | XX |
| 建议 | XX |

## 问题列表

### 🔴 严重问题（Critical）

必须立即修复，否则会导致安全漏洞、数据丢失或系统崩溃。

| 文件 | 行号 | 问题 | 影响 | 修复建议 |
|------|------|------|------|----------|
| api/user.py | 45 | SQL 注入风险 | 数据泄露 | 使用参数化查询 |
| core/auth.py | 23 | 密码明文存储 | 安全风险 | 使用 bcrypt 加密 |

### 🟡 重要问题（Important）

应该尽快修复，会影响代码质量或性能。

| 文件 | 行号 | 问题 | 影响 | 修复建议 |
|------|------|------|------|----------|
| utils/helper.py | 12 | 硬编码密钥 | 安全风险 | 使用环境变量 |
| services/user.py | 67 | N+1 查询问题 | 性能问题 | 使用 join 优化 |

### 💡 建议（Suggestions）

可以改进的地方，提高代码可读性和可维护性。

| 文件 | 行号 | 建议 | 原因 |
|------|------|------|------|
| models/user.py | 8 | 添加 Docstring | 提高可读性 |
| api/routes.py | 34 | 提取重复代码 | 减少重复 |

## 审查维度详情

### 1. 正确性 ✅

- 功能实现符合需求
- 边界情况处理正确
- 异常处理完善

### 2. 安全性 ⚠️

- **发现2个严重安全问题**
- 需要立即修复 SQL 注入和密码加密问题

### 3. 性能 ⚠️

- **发现1个性能问题**
- N+1 查询需要优化

### 4. 可读性 ✅

- 代码结构清晰
- 命名规范
- 部分函数缺少注释

### 5. 可维护性 ✅

- 模块划分合理
- 代码复用良好
- 测试覆盖率达标

### 6. 规范性 ✅

- 符合 project_standards.md 规范
- 代码格式统一
- 命名约定一致

## 代码质量评分

| 维度 | 评分 | 说明 |
|------|------|------|
| 正确性 | 9/10 | 功能实现正确 |
| 安全性 | 5/10 | 存在严重安全问题 |
| 性能 | 7/10 | 存在性能优化空间 |
| 可读性 | 8/10 | 代码清晰，部分缺少注释 |
| 可维护性 | 8/10 | 结构合理 |
| 规范性 | 9/10 | 符合项目规范 |
| **总分** | **7.7/10** | **需要修复安全问题** |

## 修复优先级

### P0 - 立即修复（阻塞发布）
1. SQL 注入风险（api/user.py:45）
2. 密码明文存储（core/auth.py:23）

### P1 - 尽快修复（本周内）
1. 硬编码密钥（utils/helper.py:12）
2. N+1 查询问题（services/user.py:67）

### P2 - 计划修复（下个 Sprint）
1. 添加 Docstring（models/user.py:8）
2. 提取重复代码（api/routes.py:34）

## 总结

### 主要发现
1. 存在2个严重安全问题，必须立即修复
2. 代码整体质量良好，结构清晰
3. 性能方面有优化空间

### 建议
1. 立即修复 SQL 注入和密码加密问题
2. 增加代码注释，提高可读性
3. 优化数据库查询性能

### 审查结论
- ❌ **不建议合并**，需要先修复严重安全问题
- 修复后重新提交审查
